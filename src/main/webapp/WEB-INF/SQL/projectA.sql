DROP TABLE REVIEW;
DROP TABLE FREPLY;
DROP TABLE MEMBER;
DROP TABLE OWNER;
DROP TABLE OWNERIDF;
DROP TABLE STOREREG;
DROP TABLE NOTICE;
DROP TABLE FBOARD;
DROP TABLE QNABOARD;
DROP SEQUENCE REVIEW_SEQ;
DROP SEQUENCE NOTICE_SEQ;
DROP SEQUENCE STOREREG_SEQ;
DROP SEQUENCE FBOARD_SEQ;
DROP SEQUENCE FREPLY_SEQ;
DROP SEQUENCE QNABOARD_SEQ;
CREATE TABLE MEMBER(
    MEMBERNO NUMBER PRIMARY KEY,
    MEMBERID VARCHAR2(32) UNIQUE ,
    MEMBERPW VARCHAR2(32),
    MEMBERNAME VARCHAR2(32),
    MEMBERADDR VARCHAR2(64),
    MEMBERTEL VARCHAR2(32),
    MEMBEREMAIL VARCHAR2(32),
    MEMBERAGE NUMBER
);
ALTER TABLE MEMBER MODIFY MEMBERID VARCHAR2(32) NOT NULL;
ALTER TABLE MEMBER MODIFY MEMBERAGE VARCHAR2(32) NOT NULL;

CREATE TABLE OWNERIDF (
    OWNERNO NUMBER PRIMARY KEY,
    OWNERNAME VARCHAR2(32),
    STORENAME VARCHAR2(32),
    OWNEREMAIL VARCHAR2(32) UNIQUE
);

CREATE TABLE OWNER(
    OWNERNO NUMBER PRIMARY KEY,
    OWNERPW VARCHAR2(32),
    OWNERTEL VARCHAR2(32),
    OWNEREMAIL VARCHAR2(32),
    OWNERNAME VARCHAR2(32),
    STORENAME VARCHAR2(32),
    CONSTRAINT FK_ID FOREIGN KEY (OWNERNO) REFERENCES OWNERIDF(OWNERNO)
);


CREATE TABLE STOREREG(
    STORENO NUMBER PRIMARY KEY,
    OWNERNAME VARCHAR2(32),
    STORENAME VARCHAR2(32),
    STORETEL VARCHAR2(32),
    STORECATEGORI VARCHAR2(32),
    STORETIME VARCHAR2(32),
    STOREADDR VARCHAR2(64),
    STORECONTENT VARCHAR2(300),
    FILENAME1 VARCHAR2(64),
    STORETABLE NUMBER
    );
CREATE TABLE NOTICE(
    NO NUMBER PRIMARY KEY,
    WRITER VARCHAR2(32),
    TITLE VARCHAR2(32),
    CONTENT VARCHAR2(300),
    POSTDATE DATE,
    LASTDATE DATE,
    HIT NUMBER
);
INSERT INTO NOTICE VALUES (1,'ADMIN','공지사항','공지사항 게시판입니다',SYSDATE,SYSDATE,0);
CREATE TABLE FBOARD(
      NO NUMBER PRIMARY KEY,
      WRITER VARCHAR2(32),
      TITLE VARCHAR2(32),
      CONTENT VARCHAR2(300),
      FILENAME1 VARCHAR2(32),
      POSTDATE DATE
);
CREATE TABLE FREPLY(
      FNO NUMBER PRIMARY KEY,
      NO NUMBER,
      WRITER VARCHAR2(32),
      CONTENT VARCHAR2(300),
      POSTDATE DATE,
      CONSTRAINT FK_REPLY FOREIGN KEY (WRITER) REFERENCES MEMBER(MEMBERID),
      CONSTRAINT FK_REPLY_NO FOREIGN KEY (NO) REFERENCES FBOARD(NO)
);

CREATE TABLE QNABOARD(
    NO NUMBER PRIMARY KEY,
    WRITER VARCHAR2(32),
    TITLE VARCHAR2(32),
    CONTENT VARCHAR2(300),
    POSTDATE DATE,
    GROUPORD NUMBER,
    GROUPNO NUMBER,
    DEPTH NUMBER
);

CREATE TABLE REVIEW(
    WRITER VARCHAR2(32),
    NO NUMBER PRIMARY KEY,
    SCORE NUMBER,
    CONTENT VARCHAR2(300),
    FILENAME VARCHAR2(64),
    STORENO NUMBER,
      CONSTRAINT FK_REVIEW FOREIGN KEY (STORENO) REFERENCES STOREREG(STORENO)
);
CREATE SEQUENCE STOREREG_SEQ INCREMENT BY 1 START WITH 1 NOCYCLE NOCACHE;
CREATE SEQUENCE NOTICE_SEQ INCREMENT BY 1 START WITH 1 NOCYCLE NOCACHE;
CREATE SEQUENCE FBOARD_SEQ INCREMENT BY 1 START WITH 1 NOCYCLE NOCACHE;
CREATE SEQUENCE FREPLY_SEQ INCREMENT BY 1 START WITH 1 NOCYCLE NOCACHE;
CREATE SEQUENCE QNABOARD_SEQ INCREMENT BY 1 START WITH 1 NOCYCLE NOCACHE;
CREATE SEQUENCE REVIEW_SEQ INCREMENT BY 1 START WITH 1 NOCYCLE NOCACHE;
INSERT INTO STOREREG VALUES(1,'이연복','목란','010-1111-1111','중식','09:00-17:00','서울시 강남구 삼성동 165-5','중식점 목란입니다.','이미지',10);
INSERT INTO STOREREG VALUES(2,'백종원','골목식당','010-2222-2222','한식','09:00-17:00','서울시 강남구 삼성동 165-6','한식점 골목식당입니다.','이미지',10);
INSERT INTO REVIEW VALUES('ABC',REVIEW_SEQ.NEXTVAL,5,'정말맛있어요','FILENAME1',1);
INSERT INTO REVIEW VALUES('ADE',REVIEW_SEQ.NEXTVAL,5,'정말맛있어요','FILENAME1',2);

SELECT R.NO, R.WRITER,R.SCORE,R.CONTENT,R.FILENAME,S.STORENAME,S.STORECATEGORI 
FROM REVIEW R , STOREREG S  WHERE R.STORENO =S.STORENO AND R.WRITER='ABC';

SELECT * FROM REVIEW WHERE WRITER='ABC';
SELECT R.WRITER,R.SCORE,R.CONTENT,R.FILENAME,S.STORENAME,S.STORECATEGORI 
	FROM REVIEW R , STOREREG S  
	WHERE R.STORENO =S.STORENO AND S.STORENO='2';